# RequestValidator Class Documentation

The `RequestValidator` class is a powerful tool for validating incoming request data in a Node.js application. It offers a wide range of validation methods to ensure that data meets specified criteria. This documentation provides detailed information about the class, its methods, and the available validation options.

## Constructor

### Parameters:

- `req` (Object): The request object containing the data to be validated. This parameter is mandatory and must be provided when creating an instance of the `RequestValidator` class.

### Example:

```javascript
const validator = new RequestValidator(req);
```

## Methods

### validate

The `validate` method is used to validate the request data based on the specified rules.

#### Parameters:

- `rules` (Object): An object containing the validation rules for the request data. Each key in the object represents a field in the request data, and its value specifies the validation rules for that field.
- `options` (Object): Additional options for validation.
  - `customMessages` (Object): Custom error messages for specific fields. If provided, these messages will override the default error messages generated by the validators.

#### Returns:

- An object containing validation errors, if any. Each key in the object corresponds to a field in the request data, and its value is the error message generated by the validator.

#### Example:

```javascript
const req = { username: 'mahdi', age: 19};
const validator = new RequestValidator(req);
const rules = {
  username: 'string|alphanumeric|min:5|max:20',
  age: 'number|min:20',
};
const options = {
  customMessages: {
    age: 'The age must be at least 20.',
  },
};
const errors = validator.validate(rules, options);
console.log(errors); // Output: { age: 'The age must be at least 20.' }
```

## Available Validators

The `RequestValidator` class provides a variety of built-in validators to handle different types of data and validation scenarios. Here are the available validators:

### Type Validators

- **string**: Validates that the data is a string.
- **number**: Validates that the data is a number.
- **array**: Validates that the data is an array.
- **object**: Validates that the data is an object.
- **boolean**: Validates that the data is a boolean.

### Length Validators

- **min**: Validates that the length of the data meets a minimum requirement.
- **max**: Validates that the length of the data does not exceed a maximum limit.
- **lengthRange**: Validates that the length of the data falls within a specified range.
- **dateRange**: Validates that a date falls within a specified range.
- **arrayLength**: Validates the length of an array.
- **arrayRange**: Validates that the number of elements in an array falls within a specified range.
- **objectKeys**: Validates the number of keys in an object.

### Case Validators

- **uppercase**: Validates that the data contains uppercase letters.
- **lowercase**: Validates that the data contains lowercase letters.

### Format Validators

- **specialCharacter**: Validates that the data contains special characters.
- **email**: Validates that the data is a valid email address.
- **date**: Validates that the data is a valid date.
- **url**: Validates that the data is a valid URL.
- **phoneNumber**: Validates that the data is a valid phone number.
- **ipv4**: Validates that the data is a valid IPv4 address.
- **ipv6**: Validates that the data is a valid IPv6 address.
- **http**: Validates that the data is a valid HTTP URL.
- **https**: Validates that the data is a valid HTTPS URL.

### Additional Validators

- **whitespace**: Validates that the data does not contain leading or trailing whitespace.
- **trim**: Trims whitespace from the data.
- **file**: Validates file uploads.
- **enum**: Validates that the data is one of a specified set of values.
- **regex**: Validates the data against a regular expression pattern.

### Custom Validators

The `RequestValidator` class also allows you to define custom validators for specific validation requirements. Custom validators should be added to the `validators` object in the class constructor.

### Security Validators

- **sqlInjection**: Detects SQL injection attempts.
- **noSQLInjection**: Detects NoSQL injection attempts.
- **xss**: Detects cross-site scripting (XSS) attacks.
- **passwordHash**: Validates password hashes.
- **authToken**: Validates authentication tokens.

## Example in Express

Here's an example of how to use the `RequestValidator` class in an Express application:

```javascript
const express = require('express');
const RequestValidator = require('./RequestValidator');

const app = express();
app.use(express.json());

app.post('/signup', (req, res) => {
  const validator = new RequestValidator(req.body);
  const rules = {
    username: 'string|alphanumeric|min:5|max:20',
    password: 'string|min:8',
    email: 'email',
  };
  const errors = validator.validate(rules);
  if (Object.keys(errors).length === 0) {
    // Data is valid, proceed with signup
    res.status(200).json({ message: 'Signup successful!' });
  } else {
    // Validation errors, return error response
    res.status(400).json({ errors });
  }
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
```

In this example, the Express server receives a POST request to the `/signup` endpoint with JSON data containing `username`, `password`, and `email` fields. The `RequestValidator` class is used to validate the request body against specified rules. If there are validation errors, the server responds with a 400 status code and the error messages; otherwise, it responds with a 200 status code indicating successful signup.